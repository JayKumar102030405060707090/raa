<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced YouTube API</title>
    <link rel="stylesheet" href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css">
    <style>
        .api-section {
            margin-bottom: 2rem;
        }
        .endpoint {
            background-color: #2a2a2a;
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .param-table {
            margin-top: 1rem;
        }
        pre {
            background-color: #212121;
            padding: 1rem;
            border-radius: 5px;
            overflow-x: auto;
        }
        .stats-card {
            background-color: #2a2a2a;
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="bg-dark text-light">
    <div class="container mt-4">
        <header class="mb-5">
            <h1 class="display-4">Enhanced YouTube API</h1>
            <p class="lead">A powerful API for extracting and streaming YouTube content with proxy rotation and caching</p>
        </header>

        <div class="row">
            <div class="col-md-8">
                <div class="api-section">
                    <h2>API Documentation</h2>
                    
                    <div class="endpoint">
                        <h3>YouTube Content</h3>
                        <code class="d-block mb-2">GET /api/youtube</code>
                        <p>Get video metadata and streaming URL</p>
                        
                        <h5>Query Parameters</h5>
                        <table class="table table-sm table-dark param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>query</td>
                                    <td>string</td>
                                    <td>Yes</td>
                                    <td>YouTube URL, video ID, or search query</td>
                                </tr>
                                <tr>
                                    <td>video</td>
                                    <td>boolean</td>
                                    <td>No</td>
                                    <td>Whether to return video (true) or audio (false, default)</td>
                                </tr>
                                <tr>
                                    <td>api_key</td>
                                    <td>string</td>
                                    <td>Yes</td>
                                    <td>Your API key for authentication</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <h5>Example Response</h5>
                        <pre>{
  "youtube_id": "dQw4w9WgXcQ",
  "title": "Rick Astley - Never Gonna Give You Up (Official Music Video)",
  "duration": 212,
  "thumbnail": "https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg",
  "channel": "Rick Astley",
  "views": 1234567890,
  "stream_url": "https://example.com/stream/uuid-here",
  "video_mode": false,
  "status": "success"
}</pre>
                    </div>
                    
                    <div class="endpoint">
                        <h3>Stream Media</h3>
                        <code class="d-block mb-2">GET /stream/:stream_id</code>
                        <p>Stream audio/video content or redirect to direct stream URL</p>
                        
                        <h5>Path Parameters</h5>
                        <table class="table table-sm table-dark param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>stream_id</td>
                                    <td>string</td>
                                    <td>Stream ID returned from the YouTube API</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <p class="mt-3">This endpoint returns streaming audio/video content with the appropriate content type.</p>
                    </div>
                    
                    <div class="endpoint">
                        <h3>API Statistics</h3>
                        <code class="d-block mb-2">GET /api/stats?api_key=:admin_api_key</code>
                        <p>Get API and system statistics (admin only)</p>
                        
                        <h5>Query Parameters</h5>
                        <table class="table table-sm table-dark param-table">
                            <thead>
                                <tr>
                                    <th>Parameter</th>
                                    <th>Type</th>
                                    <th>Required</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>api_key</td>
                                    <td>string</td>
                                    <td>Yes</td>
                                    <td>Admin API key</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="endpoint">
                        <h3>Health Check</h3>
                        <code class="d-block mb-2">GET /health</code>
                        <p>Simple health check endpoint</p>
                        
                        <h5>Example Response</h5>
                        <pre>{
  "status": "healthy",
  "version": "1.0.0"
}</pre>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="stats-card">
                    <h4>System Statistics</h4>
                    <table class="table table-sm table-dark">
                        <tbody>
                            <tr>
                                <th>API Keys</th>
                                <td>{{ stats.api_keys }}</td>
                            </tr>
                            <tr>
                                <th>Total Requests</th>
                                <td>{{ stats.total_requests }}</td>
                            </tr>
                            <tr>
                                <th>Videos Cached</th>
                                <td>{{ stats.total_videos_cached }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card bg-dark border-secondary">
                    <div class="card-body">
                        <h5 class="card-title">Usage Example</h5>
                        <pre class="mb-0">curl "https://example.com/api/youtube?query=https://www.youtube.com/watch?v=dQw4w9WgXcQ&api_key=YOUR_API_KEY"</pre>
                    </div>
                </div>
                
                <div class="mt-4">
                    <h5>Features</h5>
                    <ul class="list-group">
                        <li class="list-group-item bg-dark text-light border-secondary">üîç Advanced YouTube search</li>
                        <li class="list-group-item bg-dark text-light border-secondary">üîÑ Proxy rotation to avoid bans</li>
                        <li class="list-group-item bg-dark text-light border-secondary">üì¶ Caching for improved performance</li>
                        <li class="list-group-item bg-dark text-light border-secondary">üì± Support for audio and video</li>
                        <li class="list-group-item bg-dark text-light border-secondary">üîë API key authentication</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <footer class="mt-5 mb-3 text-center text-muted">
            <p>Enhanced YouTube API &copy; 2025</p>
        </footer>
    </div>
</body>
                      </html>
